
@{
    ViewBag.Title = "Password";
    Layout = "~/Views/Shared/_User.cshtml";
}

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <i class="mr-2 fa fa-lock"></i>
                <strong class="card-title">รหัสผ่าน</strong>
            </div>
            <div class="card-body card-block">
                <form action="#" method="post" enctype="multipart/form-data" class="form-horizontal">
                    <div class="row form-group">
                        <div class="col col-md-12">
                            <h3>เปลี่ยนรหัสผ่าน</h3>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col col-md-4"><label for="user_id" class="form-control-label">รหัสสมาชิก</label></div>
                        <div class="col col-md-8"><input type="text" id="user-id" name="user_id" class="form-control form-control-sm" disabled></div>
                    </div>
                    <div class="row form-group">
                        <div class="col col-md-4"><label for="user_password" class="form-control-label">รหัสผ่านปัจจุบัน</label></div>
                        <div class="col col-md-8"><input type="text" id="user-password" name="user_password" class="form-control form-control-sm"></div>
                    </div>
                    <div class="row form-group">
                        <div class="col col-md-4"><label for="user_new_password" class="form-control-label">รหัสผ่านใหม่</label></div>
                        <div class="col col-md-8"><input type="text" id="user-new-password" name="user_new_password" class="form-control form-control-sm"></div>
                    </div>
                    <div class="row form-group">
                        <div class="col col-md-4"><label for="user_comfirm_new_password" class="form-control-label">ยืนยันรหัสผ่านใหม่</label></div>
                        <div class="col col-md-8"><input type="text" id="user-comfirm-new-password" name="user_comfirm_new_password" class="form-control form-control-sm"></div>
                    </div>
                    <div class="row form-group" style="text-align:center;">
                        <div class="col col-md-12"><button type="button" class="btn btn-primary" id="confirmChange">บันทึก</button> <button type="button" class="btn btn-secondary">ยกเลิก</button></div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
     // URL
    updatePassword = '@Url.Action("updatePassword", "Admin")';

    (function ($) {

        //Confirm change password
        $("#btnDelete").click(function () {
	        var user = {
                ID: $('#user-id').val(),
                Password: $('#user-new-password').val()
	        };

	        $.ajax({
			    url: updatePassword,
			    data: { User: user },
			    type: "POST",
			    dataType: "json",
			    success: function (data) {
				    if (data == "ss") {
					    Swal.fire({
						    type: 'success',
						    title: 'แก้ไขข้อมูลเรียบร้อย',
						    showConfirmButton: false,
						    timer: 1500
					    });
				    }
			    },
			    error: function (xhr, ajaxOptions, thrownError) {
				    alert("error");
			    }
            });
        });
    })(jQuery);
</script>
