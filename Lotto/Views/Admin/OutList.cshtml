@model IList<Lotto.Models.Poll_Out>
@{
    ViewBag.Title = "OutList";
    Layout = "~/Views/Shared/_Admin.cshtml";
}

<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <i class="mr-2 fa fa-list"></i>
                <strong class="card-title">ดูโพยแทงออกทั้งหมด</strong>
            </div>
            <div class="card-body">
                <table id="bootstrap-data-table" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>จำนวนโพย</th>
                            <th>ยอดแทง</th>
                            <th>ยอดหัก %</th>
                            <th>ยอดถูก</th>
                            <th>สถานะโพย</th>
                            <th>วิธีส่ง</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                        <tr>
                            <td>@item.Count</td>
                            <td>@item.Amount</td>
                            <td>@item.AmountDiscount</td>
                            <td>@item.AmountWin</td>
                            @if (item.Send_To_UID == "")
                            {
                                <td>ใหม่</td>
                            }
                            else
                            {
                                <td>ส่งแล้ว</td>
                            }
                            @if (item.Status == "0")
                            {
                                <td>ยังไม่ได้ส่ง</td>
                            }
                            else if (item.Status == "1")
                            {
                                <td>พิมพ์ส่ง</td>
                            }
                            else if(item.Status == "2")
                            {
                                <td>ส่งผ่านเว็บไปที่ - @item.Name</td>
                            }
                            else { }
                            <td><button type="button" onclick="OutPoll('@item.Send_To_UID','@item.Period_ID')" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#OutPollModal" data-backdrop="static" data-keyboard="false">ดูโพย</button></td>
                        </tr>
                        }
                        </tbody>
                    <tfoot>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="OutPollModal" tabindex="-1" role="dialog" aria-labelledby="OutPollModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document" style="max-width:50%;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" style="display:inline-block" id="OutPollModalLabel">รายการแทงเลข <span id="headernumber"></span> - <span id="headertype"></span></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table class="table table-striped table-bordered out-poll-data-table">
                    <thead>
                        <tr>
                            <th>ลำดับ</th>
                            <th>ยอดแทง</th>
                            <th>ยอดหัก %</th>
                            <th>ยอดถูก</th>
                            <th>สถานะโพย</th>
                            <th>วิธีส่ง</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    <tfoot>
                        <tr>
                            <th>รวม</th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th><span id="total_amount"></span></th>
                            <th></th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>
<script src="~/Assets/js/Outlist.js"></script>
<script>
    getOutPoll = '@Url.Action("getOutPoll", "Admin")';
    (function ($) {
        $('#bootstrap-data-table').DataTable({
            lengthMenu: [[10, 20, 50, -1], [10, 20, 50, "All"]],
            fixedHeader: {
                footer: true
            }
        });

    })(jQuery);
</script>

